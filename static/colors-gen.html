<html lang="ru">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" href="favicon.ico">
<title>React-py.ru</title>
<script src="js/pyramid.js"></script>
</head>
<body style="margin: 0">

<div tabindex="1" style="position: relative; border: 1px solid #aaa; height: calc(100vh - 17px); margin: auto; overflow: hidden; padding: 5px; width: 1000px">
<div style="position: relative;">
<div style="position: absolute; right: 15px; top: 5px; "><div>
<svg id="pyramid" width="120" height="130">
    <polygon stroke-width="1"/><polygon stroke-width="1"/>
    <polygon stroke-width="1"/><polygon stroke-width="1"/>
    <polygon stroke-width="1"/><polygon stroke-width="1"/>
    <polygon stroke-width="1"/><polygon stroke-width="1"/>
    <polygon stroke-width="1"/><polygon stroke-width="1"/>
    <polygon stroke-width="1"/><polygon stroke-width="1"/>
</svg>
</div></div><div style="font: 16px / 1.5 Verdana; height: calc(100vh - 12px); overflow: auto;"><div><div class=""><div class=""><div class=""><h2>Семантическая раскраска текстов в html и React</h2><br>Добавить разметку в текст руками легко. Можно на сайте, можно сделать поиск с заменой в Notepad++ или в Atom.<br><br>Если это 1 текст. Если текстов много, хочется иметь инструмент для выделения фрагментов текста html-тегами или формирование исходного кода для React.<br><br>На Питоне это не сложно (несколько строк кода на цвет).<br><br>
<img src="images/colors1.png" width="100%" alt="alt" style="width: 80%; margin: auto; max-width: 80%; min-width: 80%;"><br><br>Если вы знаете Питон и регулярные выражения, переходите <a href="http://react-py.ru/newdoc?M&amp;js_to_react">по ссылке.</a><br><br>Там и примеры, и исходные коды. Ниже подробное описание.<br><br><h3>Разметка текста на примере раскраски исходного кода на Javascript</h3><br>Рассмотрим функцию:<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: blue;">def</span> jsToHtml<span style="color: rgb(0, 68, 136);">(</span>s<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span></div><br>На входе исходный текст javascript, возвращает html.<br><br>Задаем переменные, определяющие атрибуты блоков. В примере для наглядности используются стили, в дальнейшем логичней заменить их на классы.<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;">comm <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">'style="color: red;"'</span> <span style="color: red;"># цвет для комментариев<br></span>blue <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">'style="color: blue;"'</span> <span style="color: red;"># синий<br></span><span style="color: rgb(0, 68, 136);">.</span><span style="color: rgb(0, 68, 136);">.</span><span style="color: rgb(0, 68, 136);">.</span></div><br>Разметка.<br><br>Первое, что нужно сделать  - это заэкранировать символы '&amp;', '&lt;', '&gt;'<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;">s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'&amp;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;amp;'</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'&lt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;lt;'</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;gt;'</span><span style="color: rgb(0, 68, 136);">)</span></div><br>'&amp;' экранируется, чтобы правильно отображать буквосочетания '&amp;lt;', '&amp;gt;' и прочие '&amp;...;',<br><br>Символы '&lt;', '&gt;' экранируются, чтобы не конфликтовать с тэгами.<br><br>Можно много чего заэкранировать, но, на мой взгляд, в utf-8 этого достаточно.<br><br><ul><b>Алгоритм разметки:<br></b><br>	<li>Берем re-шаблон и ищем все фрагменты текста, которые ему удовлетворяют.</li><br>	<li>Вырезаем каждый фрагмент, добавляем к нему разметку и сохраняем размеченный фрагмент в массиве (заодно сохраняем оригинальный текст: пригодится).</li><br>	<li>На его место вставляем заглушку с номером.</li><br>        <li>И так для каждого цвета.</li><br>	<li>Когда все раскрашено, заменяем заглушки на раскрашенные фрагменты из массива.</li><br></ul><br>Заглушка должна быть уникальной, но у нас же в тексте нет ни одного символа  '&lt;' и  ни одного '&gt;'.<br><br>Делаем заглушку:<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span></div><br>где i – номер заглушки. Такого в тексте точно нет.<br><br>Что делать, если внутри фрагмента уже есть заглушка?<br><br>Например, в исходном тексте были строки:<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: green; font-style: italic;">` пример вложенности: строка  /* а в ней комментарий */ `</span><br><span style="color: red;">/* комментарий, ` а в нем строка ` */</span></div><br>Вариантов 2:<br><ol><li>Проигнорировать. В этом случае строка будет иметь двойной окрас.</li><br>	<li>Найти вложенные заглушки и заменить их на исходный (неразмеченный) текст.</li><br></ol><br>Делаем функцию, которая все это реализует (10 строк кода, 10 строк комментария):<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: blue;">def</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>reStr<span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> attr<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>    <span style="color: green; font-style: italic;">'''<br>    Ищет в исходной строке s нужные блоки, добавляет в них разметку и сохраняет результат в массиве ls,<br>    на их место вставляет заглушки с номерами (&lt;0&gt;, &lt;1&gt; ...&lt;1528&gt;...).<br>    Возвращает результат в виде строки с заглушками.<br>    <br>    reStr - re<br>    s - строка<br>    attr - атрибуты style/class/etc<br>    ls - массив с разметкой<br>    multiColor=False, если надо убрать вложенную разметку<br>    '''</span><br>    <span style="color: blue;">for</span> block <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>reStr<span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>        toArr <span style="color: rgb(0, 68, 136);">=</span> block<br>        <span style="color: blue;">if</span> <span style="color: blue;">not</span> multiColor<span style="color: rgb(0, 68, 136);">:</span> <span style="color: red;"># если multiColor==False, убрать вложенную разметку<br></span>            <span style="color: blue;">for</span> prev <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'&lt;[\d]+&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> block<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: red;"># ищем вложенность: &lt;0&gt; ... &lt;21&gt;<br></span>                iPrev <span style="color: rgb(0, 68, 136);">=</span> int<span style="color: rgb(0, 68, 136);">(</span>prev<span style="color: rgb(0, 68, 136);">[</span>1<span style="color: rgb(0, 68, 136);">:</span><span style="color: rgb(0, 68, 136);">-</span>1<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">,</span> 10<span style="color: rgb(0, 68, 136);">)</span>                <span style="color: red;"># выделяем номер строки в массиве<br></span>                toArr <span style="color: rgb(0, 68, 136);">=</span> toArr<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>prev<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">[</span>iPrev<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">[</span>1<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span>  <span style="color: red;"># в строке '&lt;0&gt; qwe &lt;21&gt;' заменяем ссылки(&lt;0&gt;,&lt;21&gt;) на первонач. значения<br></span>        ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{attr}</span>&gt;<span style="color: rgb(136, 68, 0);">{toArr}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> toArr<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># в каждом элеменете массива ls 2 элемента: размеченный текст и оригинал <br></span>        s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>block<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{len(ls)-1}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">)</span><br>    <span style="color: blue;">return</span> s</div><br>Это демонстрационный пример: разметка регулярных выражений может быть некорректной,  экранированные символы (\', \")  не обрабатываются.<br><br>Для справки: выражение:<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;">s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">/A + B/g</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'A - B'</span><span style="color: rgb(0, 68, 136);">)</span>;</div><br>в редакторах Notepad++ и в Atom раскрашено по разному.<br><br>Теперь, когда есть <b>oneRe</b>, раскраска фрагментов делается просто. Пример, раскрашивающий строки в апострофах и кавычках:<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;">s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">"'[\s\S]*?'"</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода 'строки' в массив ls<br></span>s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'"[\s\S]*?"'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода "строки" в массив ls<br></span></div><br>Пример боле сложной раскраски. Нужно в js раскрасить выражения в многостроках <div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: green; font-style: italic;">`многострочная строка с выражениями <span style="color: rgb(136, 68, 0);">${A + B}</span> и <span style="color: rgb(136, 68, 0);">${A - B}</span>`</span></div><br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: blue;">for</span> mStr <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'`[\s\S]+?`'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: red;"># раскраска переменных внутри многострок<br></span>    newFstr <span style="color: rgb(0, 68, 136);">=</span> mStr<br>    <span style="color: blue;">for</span> val <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">"\$\{[\s\S]+?\}"</span><span style="color: rgb(0, 68, 136);">,</span> mStr<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>        ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{darkRed}</span>&gt;<span style="color: rgb(136, 68, 0);">{val}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> val<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span><br>        newFstr <span style="color: rgb(0, 68, 136);">=</span> newFstr<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>val<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">)</span><br>        i <span style="color: rgb(0, 68, 136);">+=</span> 1<br>    s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>mStr<span style="color: rgb(0, 68, 136);">,</span> newFstr<span style="color: rgb(0, 68, 136);">)</span><br>    <br>s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'`[\s\S]+?`'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">True</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода `многостроки` в массив ls<br></span></div><br>сначала находим многосторки:<br><br><b>re.findall(r'`[\s\S]+?`', s)</b> возвращает список блоков текста между символами обратных кавычек. <br><br>Каждый блок содержит либо пробелы, либо не пробелы ([\s\S] т.е. что угодно).<br><br>Длина блока 1 или более (+).<br><br>Без жадности ("?" означает, что символа "`" внутри блока нет).<br><br>Копируем найденный блок(переменная <b>mStr</b>) в переменную <b>newFstr</b>.<br>Находим в блоке подблоки с выражениями ${...}.<br><br><b>re.findall(r"\$\{[\s\S]*?\}", mStr) </b>возвращает список таких подблоков. Сохраняем разметку в массиве ls и заменяем подблок на заглушку в переменной <b>newFstr</b>.<br>Когда подблоки кончатся, заменяем в исходной строке <b>s</b> первоначальное значение блока на новое.<br><br><b>Set </b>не лишний. Если <b>findall </b>вернет несколько одинаковых блоков, при обработке первого блока в исходном тексте заменятся на заглушки сразу все одинаковые. При обработке второго такого же блока его уже не будет в исходном тексте. <b>Set </b>убирает дублирование.<br><br><details style="color: rgb(136, 68, 0);"><summary>Файл <b>jsToHtml.py</b></summary><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: red;"># -*- coding: utf-8 -*- <br></span><span style="color: green; font-style: italic;">'''<br>AON 2020<br><br>'''</span><br><br><span style="color: blue;">import</span> re<br><br><span style="color: red;"># *** *** ***<br></span><br><span style="color: blue;">def</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>reStr<span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> attr<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>    <span style="color: green; font-style: italic;">'''<br>    Ищет в исходной строке s нужные блоки, добавляет в них разметку и сохраняет результат в массиве ls,<br>    на их место вставляет заглушки с номерами (&lt;0&gt;, &lt;1&gt; ...&lt;1528&gt;...).<br>    Возвращает результат в виде строки с заглушками.<br>    <br>    reStr - re<br>    s - строка<br>    attr - атрибуты style/class/etc<br>    ls - массив с разметкой<br>    multiColor=False, если надо убрать вложенную разметку<br>    '''</span><br>    i <span style="color: rgb(0, 68, 136);">=</span> len<span style="color: rgb(0, 68, 136);">(</span>ls<span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># номер очередной заглушки<br></span>    <span style="color: blue;">for</span> block <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>reStr<span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>        toArr <span style="color: rgb(0, 68, 136);">=</span> block<br>        <span style="color: blue;">if</span> <span style="color: blue;">not</span> multiColor<span style="color: rgb(0, 68, 136);">:</span> <span style="color: red;"># если multiColor==False, убрать вложенную разметку<br></span>            <span style="color: blue;">for</span> prev <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'&lt;[\d]+&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> block<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: red;"># ищем вложенность: &lt;0&gt; ... &lt;21&gt;<br></span>                iPrev <span style="color: rgb(0, 68, 136);">=</span> int<span style="color: rgb(0, 68, 136);">(</span>prev<span style="color: rgb(0, 68, 136);">[</span>1<span style="color: rgb(0, 68, 136);">:</span><span style="color: rgb(0, 68, 136);">-</span>1<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">,</span> 10<span style="color: rgb(0, 68, 136);">)</span>                 <span style="color: red;"># выделяем номер строки в массиве<br></span>                toArr <span style="color: rgb(0, 68, 136);">=</span> toArr<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>prev<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">[</span>iPrev<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">[</span>1<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span>   <span style="color: red;"># в строке '&lt;0&gt; qwe &lt;21&gt;' заменяем ссылки(&lt;0&gt;,&lt;21&gt;) на первонач. значения<br></span>        ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{attr}</span>&gt;<span style="color: rgb(136, 68, 0);">{toArr}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> toArr<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span>  <span style="color: red;"># в каждом элеменете массива ls 2 элемента: размеченный текст и оригинал <br></span>        s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>block<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">)</span>              <span style="color: red;"># заменяем блок текста на зауглушку с номером<br></span>        i <span style="color: rgb(0, 68, 136);">+=</span> 1<br>    <span style="color: blue;">return</span> s<br><br><span style="color: red;"># *** *** ***<br></span><br><span style="color: blue;">def</span> operColor<span style="color: rgb(0, 68, 136);">(</span>s<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> color<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>    <span style="color: green; font-style: italic;">'''<br>    раскрашивает операторы.<br>    Должна вызываться последней, когда в тексте не осталось ни строк, ни комментариев<br>    '''</span><br>    i <span style="color: rgb(0, 68, 136);">=</span> len<span style="color: rgb(0, 68, 136);">(</span>ls<span style="color: rgb(0, 68, 136);">)</span><br>    <span style="color: blue;">for</span> c <span style="color: blue;">in</span> <span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">'&amp;lt;='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;gt;='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'=&amp;lt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'=&amp;gt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;lt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;gt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;amp;&amp;amp;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;amp;'</span><span style="color: rgb(0, 68, 136);">,</span><br>              <span style="color: green; font-style: italic;">'==='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'!=='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'=='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'!='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'+='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'-='</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'++'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'--'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'||'</span><span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">:</span><br>        ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{color}</span>&gt;<span style="color: rgb(136, 68, 0);">{c}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span>0<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span><br>        s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>c<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">)</span><br>        i <span style="color: rgb(0, 68, 136);">+=</span> 1<br>    <span style="color: blue;">for</span> c <span style="color: blue;">in</span> <span style="color: green; font-style: italic;">'!|=+-?:,.[](){}%*/'</span><span style="color: rgb(0, 68, 136);">:</span><br>        ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{color}</span>&gt;<span style="color: rgb(136, 68, 0);">{c}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span>0<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span><br>        s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>c<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">)</span><br>        i <span style="color: rgb(0, 68, 136);">+=</span> 1<br>    <span style="color: blue;">return</span> s<br><br><span style="color: red;"># *** *** ***<br></span><br><span style="color: blue;">def</span> jsToHtml<span style="color: rgb(0, 68, 136);">(</span>s<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>    <span style="color: green; font-style: italic;">'''<br>    Демонстрационный раскрасчик кода.<br>    Заменяет строки, комментарии и ключевые слова на элементы разметки &lt;span&gt;.<br>    '''</span><br><br>    black <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">'''style="font-family: 'Courier New', monospace;<br>        background: #fff; <br>        color: black;<br>        font-weight: bold;<br>        border: 1px solid #ddd;<br>        padding: 5px;<br>        text-align: left;<br>        white-space: pre;"'''</span><br>    comm <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">'style="color: red;"'</span><br>    green <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">'style="color: green; font-style: italic;"'</span><br>    blue <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">'style="color: blue;"'</span><br>    red2 <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">'style="color: #840;"'</span><br><br>    s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'&amp;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;amp;amp;'</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'&lt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: rgb(0, 68, 136);">&amp;</span>amp;<span style="color: green; font-style: italic;">'&amp;amp;lt;'</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&amp;amp;gt;'</span><span style="color: rgb(0, 68, 136);">)</span>   <span style="color: red;"># экранируем символы '&amp;', '&lt;', '&gt;'<br></span><br>    ls <span style="color: rgb(0, 68, 136);">=</span> <span style="color: rgb(0, 68, 136);">[</span><span style="color: rgb(0, 68, 136);">]</span><br><br>    i <span style="color: rgb(0, 68, 136);">=</span> 0<br>    <span style="color: blue;">for</span> mStr <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'`[\s\S]+?`'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: red;"># раскраска переменных внутри многострок<br></span>        newFstr <span style="color: rgb(0, 68, 136);">=</span> mStr<br>        <span style="color: blue;">for</span> val <span style="color: blue;">in</span> <span style="color: blue;">set</span><span style="color: rgb(0, 68, 136);">(</span>re<span style="color: rgb(0, 68, 136);">.</span>findall<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">"\$\{[\s\S]+?\}"</span><span style="color: rgb(0, 68, 136);">,</span> mStr<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>            ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{darkRed}</span>&gt;<span style="color: rgb(136, 68, 0);">{val}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> val<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span><br>            newFstr <span style="color: rgb(0, 68, 136);">=</span>newFstr<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>val<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">)</span><br>            i <span style="color: rgb(0, 68, 136);">+=</span> 1<br>        s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>mStr<span style="color: rgb(0, 68, 136);">,</span> newFstr<span style="color: rgb(0, 68, 136);">)</span><br>        <br>    s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'`[\s\S]+?`'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">True</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода `многостроки` в массив ls<br></span>    s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">"'[\s\S]*?'"</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода 'строки' в массив ls<br></span>    s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'"[\s\S]*?"'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода "строки" в массив ls<br></span>    s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'/[\s\S].*?/g\b'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода re-строки в массив ls<br></span>    s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'/[\s\S].*?/\.'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> green<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода re-строки в массив ls<br></span>    s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'/\*[\s\S]+?\*/'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> comm<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода /* комментарии */ в массив ls (лучший цвет - красный)<br></span>    s <span style="color: rgb(0, 68, 136);">=</span> oneRe<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'//[\s\S]*?\n'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">,</span> comm<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> multiColor<span style="color: rgb(0, 68, 136);">=</span><span style="color: blue;">False</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># убираем из кода // комментарии в массив ls (лучший цвет - красный)<br></span><br>    i <span style="color: rgb(0, 68, 136);">=</span> len<span style="color: rgb(0, 68, 136);">(</span>ls<span style="color: rgb(0, 68, 136);">)</span><br><br>    <span style="color: red;"># теперь можно раскрасить синтаксис<br></span>    <span style="color: blue;">for</span> c <span style="color: blue;">in</span> <span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">'new'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'JSON'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'Promise'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'then'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'catch'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'let'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'const'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'var'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'true'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'false'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'class'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'from'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'import'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'set'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'list'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'for'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'in'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'if'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'else'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'return'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'null'</span><span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">:</span><br>        ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{blue}</span>&gt;<span style="color: rgb(136, 68, 0);">{c}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span>0<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span><br>        s <span style="color: rgb(0, 68, 136);">=</span> re<span style="color: rgb(0, 68, 136);">.</span>sub <span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'\b%s\b'</span> <span style="color: rgb(0, 68, 136);">%</span> c<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">)</span><br>        i <span style="color: rgb(0, 68, 136);">+=</span> 1<br><br>    <span style="color: red;"># теперь можно раскрасить мои переменные<br></span>    <span style="color: blue;">for</span> c <span style="color: blue;">in</span> <span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">'window'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'doc'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'cmd'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'init'</span><span style="color: rgb(0, 68, 136);">,</span><span style="color: green; font-style: italic;">'init2'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'recalc'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'hide'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'readOnly'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'validate'</span><span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">:</span><br>        ls<span style="color: rgb(0, 68, 136);">.</span>append<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">f'&lt;span <span style="color: rgb(136, 68, 0);">{darkRed}</span>&gt;<span style="color: rgb(136, 68, 0);">{c}</span>&lt;/span&gt;'</span><span style="color: rgb(0, 68, 136);">,</span>0<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span><br>        s <span style="color: rgb(0, 68, 136);">=</span> re<span style="color: rgb(0, 68, 136);">.</span>sub <span style="color: rgb(0, 68, 136);">(</span>r<span style="color: green; font-style: italic;">'\b%s\b'</span> <span style="color: rgb(0, 68, 136);">%</span> c<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{i}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> s<span style="color: rgb(0, 68, 136);">)</span><br>        i <span style="color: rgb(0, 68, 136);">+=</span> 1<br><br>    s <span style="color: rgb(0, 68, 136);">=</span> operColor<span style="color: rgb(0, 68, 136);">(</span>s<span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">,</span> darkBlue<span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># теперь можно раскрасить операторы<br></span><br>    <span style="color: blue;">for</span> j <span style="color: blue;">in</span> range<span style="color: rgb(0, 68, 136);">(</span>len<span style="color: rgb(0, 68, 136);">(</span>ls<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">,</span> 0<span style="color: rgb(0, 68, 136);">,</span> <span style="color: rgb(0, 68, 136);">-</span>1<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span>  <span style="color: red;"># восстанавливаем операторы, переменные, комментарии, строки с новым окрасом<br></span>        s <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">f'&lt;<span style="color: rgb(136, 68, 0);">{j-1}</span>&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> ls<span style="color: rgb(0, 68, 136);">[</span>j<span style="color: rgb(0, 68, 136);">-</span>1<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">[</span>0<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span><br><br>    <span style="color: blue;">return</span> <span style="color: green; font-style: italic;">f'&lt;div <span style="color: rgb(136, 68, 0);">{black}</span>&gt;<span style="color: rgb(136, 68, 0);">{s}</span>&lt;/div&gt;'</span><br><br><span style="color: red;"># *** *** ***<br></span></div><br></details><br><h3>Преобразованме Html в React</h3><br>Преобразовать html в исходный код React можно на сайте <a href="http://htmltoreact.com">htmltoreact.com</a>. Там же есть ссылка на GitHub.<br><br>Меня это не устроило: во первых он формирует не совсем то, что мне надо, во вторых – как я это чудо затащу к себе на сервер.<br><br>Написал свой.<br><br>Устанавливаем библиотеку lxml (pip install lxml или pip3 install lxml).<br><br>Импортируем:<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: blue;">from</span> xml<span style="color: rgb(0, 68, 136);">.</span>dom<span style="color: rgb(0, 68, 136);">.</span>minidom <span style="color: blue;">import</span> parseString<br><span style="color: blue;">from</span> lxml <span style="color: blue;">import</span> html<span style="color: rgb(0, 68, 136);">,</span> etree</div><br>Преобразуем html-текст в xhtml-текст. Это почти одно и то же, но все теги закрыты.<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;">doc <span style="color: rgb(0, 68, 136);">=</span> html<span style="color: rgb(0, 68, 136);">.</span>fromstring<span style="color: rgb(0, 68, 136);">(</span>htmlText<span style="color: rgb(0, 68, 136);">)</span><br>ht <span style="color: rgb(0, 68, 136);">=</span> etree<span style="color: rgb(0, 68, 136);">.</span>tostring<span style="color: rgb(0, 68, 136);">(</span>doc<span style="color: rgb(0, 68, 136);">,</span> encoding<span style="color: rgb(0, 68, 136);">=</span><span style="color: green; font-style: italic;">'utf-8'</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>decode<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span></div><br>Полученный xhtml парсим в дом-дерево с помощью минидома.<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;">dom <span style="color: rgb(0, 68, 136);">=</span> parseString<span style="color: rgb(0, 68, 136);">(</span>ht<span style="color: rgb(0, 68, 136);">)</span></div><br>Делаем функцию, которая рекурсивно скачет по нодам и формирует результат в виде исходного кода React.<br><br>Dom-дерево после вызова parseString – это нода-папа, у которай есть ноды-дети , у которых есть еще дети и т.д.<br><br>Каждая нода – это словарь, содержащий ее описание:<br><br><ul><br>	<li>nodeName - имя ноды, строка</li><br>	<li>childNodes - ноды-дети, список</li><br>	<li>attributes- атрибуты, словарь </li><br>	<li>У ноды с названием #text есть nodeValue(строка)</li><br></ul><br>Пример:<br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: rgb(0, 68, 136);">&lt;</span>div class<span style="color: rgb(0, 68, 136);">=</span><span style="color: green; font-style: italic;">"A"</span> style<span style="color: rgb(0, 68, 136);">=</span><span style="color: green; font-style: italic;">"color: red;"</span><span style="color: rgb(0, 68, 136);">&gt;</span>Red of course<span style="color: rgb(0, 68, 136);">,</span><span style="color: rgb(0, 68, 136);">&lt;</span>br<span style="color: rgb(0, 68, 136);">&gt;</span>Сэр<span style="color: rgb(0, 68, 136);">&lt;</span><span style="color: rgb(0, 68, 136);">/</span>div<span style="color: rgb(0, 68, 136);">&gt;</span></div><br>После преобразований получим словарь:<br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: rgb(0, 68, 136);">{</span> <span style="color: green; font-style: italic;">'nodeName'</span><span style="color: rgb(0, 68, 136);">:</span><span style="color: green; font-style: italic;">'div'</span><span style="color: rgb(0, 68, 136);">,</span><br>  <span style="color: green; font-style: italic;">'attributes'</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: rgb(0, 68, 136);">{</span><span style="color: green; font-style: italic;">'style'</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: green; font-style: italic;">'color: red;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'class'</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: green; font-style: italic;">'A'</span><span style="color: rgb(0, 68, 136);">}</span><span style="color: rgb(0, 68, 136);">,</span><br>  <span style="color: green; font-style: italic;">'childNodes'</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: rgb(0, 68, 136);">[</span><br>    <span style="color: rgb(0, 68, 136);">{</span><span style="color: green; font-style: italic;">'nodeName'</span><span style="color: rgb(0, 68, 136);">:</span><span style="color: green; font-style: italic;">'#text'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'nodeValue'</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: green; font-style: italic;">'Red of course,'</span><span style="color: rgb(0, 68, 136);">}</span><span style="color: rgb(0, 68, 136);">,</span><br>    <span style="color: rgb(0, 68, 136);">{</span><span style="color: green; font-style: italic;">'nodeName'</span><span style="color: rgb(0, 68, 136);">:</span><span style="color: green; font-style: italic;">'br'</span><span style="color: rgb(0, 68, 136);">}</span><span style="color: rgb(0, 68, 136);">,</span><br>    <span style="color: rgb(0, 68, 136);">{</span><span style="color: green; font-style: italic;">'nodeName'</span><span style="color: rgb(0, 68, 136);">:</span><span style="color: green; font-style: italic;">'#text'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'nodeValue'</span><span style="color: rgb(0, 68, 136);">:</span> <span style="color: green; font-style: italic;">'Сэр'</span><span style="color: rgb(0, 68, 136);">}</span><span style="color: rgb(0, 68, 136);">,</span><br>  <span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">,</span><br><span style="color: rgb(0, 68, 136);">}</span><br></div><br>Преобразовать dom в строку несложно (есть pprint), я написал функцию htmlToReact.<br>При формировании React-кода, class заменяется на className,<br>формируется атрибут style так, как хочет React,<br>в текстовых нодах экранируются <b>'{', '}', '&lt;', '&gt;'</b>.<br><br><details style="color: rgb(136, 68, 0);"><summary>Файл <b>htmlToReact.py</b></summary><br><br><div style="font-family: &quot;Courier New&quot;, monospace; background: rgb(255, 255, 255); color: black; font-weight: bold; border: 1px solid rgb(221, 221, 221); padding: 5px; text-align: left; white-space: pre;"><span style="color: red;"># -*- coding: utf-8 -*- <br></span><br><span style="color: blue;">from</span> xml<span style="color: rgb(0, 68, 136);">.</span>dom<span style="color: rgb(0, 68, 136);">.</span>minidom <span style="color: blue;">import</span> parseString<br><span style="color: blue;">from</span> lxml <span style="color: blue;">import</span> html<span style="color: rgb(0, 68, 136);">,</span> etree<br><br><span style="color: red;"># *** *** ***<br></span><br>_react <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">''</span><br><br><span style="color: blue;">def</span> htmlToReact<span style="color: rgb(0, 68, 136);">(</span>buf<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>    <span style="color: green; font-style: italic;">'''<br>    buf - html-строка<br>    возвращает ReactJS-строку <br>    '''</span><br>    global _react<br>    _react <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">''</span><br><br>    try<span style="color: rgb(0, 68, 136);">:</span><br>        r <span style="color: rgb(0, 68, 136);">=</span> re<span style="color: rgb(0, 68, 136);">.</span>search<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'&lt;[\\s\\S]+&gt;'</span><span style="color: rgb(0, 68, 136);">,</span> buf<span style="color: rgb(0, 68, 136);">)</span><br>        <span style="color: blue;">if</span> r<span style="color: rgb(0, 68, 136);">:</span><br>            doc <span style="color: rgb(0, 68, 136);">=</span> html<span style="color: rgb(0, 68, 136);">.</span>fromstring<span style="color: rgb(0, 68, 136);">(</span>r<span style="color: rgb(0, 68, 136);">.</span>group<span style="color: rgb(0, 68, 136);">(</span>0<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">)</span><br>            ht <span style="color: rgb(0, 68, 136);">=</span> etree<span style="color: rgb(0, 68, 136);">.</span>tostring<span style="color: rgb(0, 68, 136);">(</span>doc<span style="color: rgb(0, 68, 136);">,</span> encoding<span style="color: rgb(0, 68, 136);">=</span><span style="color: green; font-style: italic;">'utf-8'</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>decode<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span><br>            xHtmlToReact<span style="color: rgb(0, 68, 136);">(</span>parseString<span style="color: rgb(0, 68, 136);">(</span>ht<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>childNodes<span style="color: rgb(0, 68, 136);">[</span>0<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">''</span><span style="color: rgb(0, 68, 136);">)</span><br>            <span style="color: blue;">return</span> _react<br>        <span style="color: blue;">else</span><span style="color: rgb(0, 68, 136);">:</span><br>            <span style="color: blue;">return</span> <span style="color: green; font-style: italic;">'&lt;empty/&gt;'</span><br>    except Exception as ex<span style="color: rgb(0, 68, 136);">:</span><br>        s <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">f'htmlToReact: \n<span style="color: rgb(136, 68, 0);">{ex}</span>'</span><br>        print<span style="color: rgb(0, 68, 136);">(</span>s<span style="color: rgb(0, 68, 136);">)</span><br>        <span style="color: blue;">return</span> s<br><br><span style="color: red;"># *** *** ***<br></span><br><span style="color: blue;">def</span> sU<span style="color: rgb(0, 68, 136);">(</span>a<span style="color: rgb(0, 68, 136);">,</span> c<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>    <span style="color: green; font-style: italic;">'''<br>    xlink:show   -&gt;  xlinkShow<br>    font-weight  -&gt;  fontWeight<br>    '''</span><br>    l<span style="color: rgb(0, 68, 136);">,</span> _<span style="color: rgb(0, 68, 136);">,</span> r <span style="color: rgb(0, 68, 136);">=</span> a<span style="color: rgb(0, 68, 136);">.</span>partition<span style="color: rgb(0, 68, 136);">(</span>c<span style="color: rgb(0, 68, 136);">)</span><br>    <span style="color: blue;">return</span> <span style="color: rgb(0, 68, 136);">(</span> <span style="color: rgb(0, 68, 136);">(</span>l <span style="color: rgb(0, 68, 136);">+</span> r<span style="color: rgb(0, 68, 136);">[</span>0<span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">.</span>upper<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: rgb(0, 68, 136);">+</span> r<span style="color: rgb(0, 68, 136);">[</span>1<span style="color: rgb(0, 68, 136);">:</span><span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: blue;">if</span> r <span style="color: blue;">else</span> a<span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">.</span>strip<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span><br><br><span style="color: red;"># *** *** ***<br></span><br><span style="color: blue;">def</span> xHtmlToReact<span style="color: rgb(0, 68, 136);">(</span>n<span style="color: rgb(0, 68, 136);">,</span> shift<span style="color: rgb(0, 68, 136);">=</span><span style="color: green; font-style: italic;">'\n    '</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>    <span style="color: green; font-style: italic;">'''<br>    Нужен для показа реакт-кода<br>    на входе нода, рекурсия по нодам с заменой минусов на upperCase<br>    результат формирует в global переменной _react<br>    '''</span><br>    global _react<br><br>    <span style="color: blue;">if</span> n<span style="color: rgb(0, 68, 136);">.</span>nodeName<span style="color: rgb(0, 68, 136);">.</span>lower<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: blue;">in</span> <span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">'head'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'script'</span><span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">:</span><br>        <span style="color: blue;">return</span><br>    <br>    _react <span style="color: rgb(0, 68, 136);">+=</span> shift <span style="color: rgb(0, 68, 136);">+</span> <span style="color: green; font-style: italic;">'&lt;'</span> <span style="color: rgb(0, 68, 136);">+</span> n<span style="color: rgb(0, 68, 136);">.</span>nodeName<span style="color: rgb(0, 68, 136);">.</span>lower<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span><br>    <span style="color: blue;">if</span> n<span style="color: rgb(0, 68, 136);">.</span>attributes<span style="color: rgb(0, 68, 136);">:</span><br>        <span style="color: blue;">for</span> k<span style="color: rgb(0, 68, 136);">,</span> v <span style="color: blue;">in</span> n<span style="color: rgb(0, 68, 136);">.</span>attributes<span style="color: rgb(0, 68, 136);">.</span>items<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>            <span style="color: blue;">if</span> k <span style="color: rgb(0, 68, 136);">==</span> <span style="color: green; font-style: italic;">'style'</span><span style="color: rgb(0, 68, 136);">:</span><br>                style <span style="color: rgb(0, 68, 136);">=</span> <span style="color: green; font-style: italic;">''</span><br>                <span style="color: blue;">for</span> s <span style="color: blue;">in</span> v<span style="color: rgb(0, 68, 136);">.</span>split<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">';'</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>                    <span style="color: blue;">if</span> s<span style="color: rgb(0, 68, 136);">.</span>strip<span style="color: rgb(0, 68, 136);">(</span><span style="color: rgb(0, 68, 136);">)</span><span style="color: rgb(0, 68, 136);">:</span><br>                        l<span style="color: rgb(0, 68, 136);">,</span> _<span style="color: rgb(0, 68, 136);">,</span> r <span style="color: rgb(0, 68, 136);">=</span> s<span style="color: rgb(0, 68, 136);">.</span>partition<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">':'</span><span style="color: rgb(0, 68, 136);">)</span><br>                        style <span style="color: rgb(0, 68, 136);">+=</span> <span style="color: green; font-style: italic;">f'''<span style="color: rgb(136, 68, 0);">{sU(l, '-')}</span>: "<span style="color: rgb(136, 68, 0);">{r.strip()}</span>", '''</span><br>                <span style="color: blue;">if</span> style<span style="color: rgb(0, 68, 136);">:</span><br>                    _react <span style="color: rgb(0, 68, 136);">+=</span> <span style="color: green; font-style: italic;">' style={{'</span> <span style="color: rgb(0, 68, 136);">+</span> style <span style="color: rgb(0, 68, 136);">+</span> <span style="color: green; font-style: italic;">'}}'</span><br>            <span style="color: blue;">elif</span> k <span style="color: rgb(0, 68, 136);">==</span> <span style="color: green; font-style: italic;">'class'</span><span style="color: rgb(0, 68, 136);">:</span><br>                _react <span style="color: rgb(0, 68, 136);">+=</span> <span style="color: green; font-style: italic;">f' className="<span style="color: rgb(136, 68, 0);">{v}</span>"'</span><br>            <span style="color: blue;">else</span><span style="color: rgb(0, 68, 136);">:</span><br>                kk <span style="color: rgb(0, 68, 136);">=</span> k<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'xlink:href'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'href'</span><span style="color: rgb(0, 68, 136);">)</span> <span style="color: red;"># deprcated<br></span>                _react <span style="color: rgb(0, 68, 136);">+=</span> <span style="color: green; font-style: italic;">f''' <span style="color: rgb(136, 68, 0);">{sU( sU(kk, ':'), '-' )}</span>="<span style="color: rgb(136, 68, 0);">{v}</span>"'''</span><br>        <br>    _react <span style="color: rgb(0, 68, 136);">+=</span> <span style="color: green; font-style: italic;">'&gt;'</span><br>    <span style="color: blue;">if</span> n<span style="color: rgb(0, 68, 136);">.</span>childNodes<span style="color: rgb(0, 68, 136);">:</span><br>        <span style="color: blue;">for</span> child <span style="color: blue;">in</span> n<span style="color: rgb(0, 68, 136);">.</span>childNodes<span style="color: rgb(0, 68, 136);">:</span><br>            <span style="color: blue;">if</span>  child<span style="color: rgb(0, 68, 136);">.</span>nodeName <span style="color: rgb(0, 68, 136);">==</span> <span style="color: green; font-style: italic;">'#text'</span><span style="color: rgb(0, 68, 136);">:</span><br>                tx <span style="color: rgb(0, 68, 136);">=</span> child<span style="color: rgb(0, 68, 136);">.</span>nodeValue<br>                <span style="color: blue;">for</span> x <span style="color: blue;">in</span> <span style="color: rgb(0, 68, 136);">[</span><span style="color: green; font-style: italic;">'{'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'}'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&lt;'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&gt;'</span><span style="color: rgb(0, 68, 136);">]</span><span style="color: rgb(0, 68, 136);">:</span><br>                    tx <span style="color: rgb(0, 68, 136);">=</span> tx<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span>x<span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'{"'</span> <span style="color: rgb(0, 68, 136);">+</span> x <span style="color: rgb(0, 68, 136);">+</span> <span style="color: green; font-style: italic;">'"_{_'</span><span style="color: rgb(0, 68, 136);">)</span><br>                tx <span style="color: rgb(0, 68, 136);">=</span> tx<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'_{_'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'}'</span><span style="color: rgb(0, 68, 136);">)</span><br>                <span style="color: blue;">if</span> tx<span style="color: rgb(0, 68, 136);">[</span><span style="color: rgb(0, 68, 136);">-</span>1<span style="color: rgb(0, 68, 136);">]</span> <span style="color: rgb(0, 68, 136);">==</span> <span style="color: green; font-style: italic;">' '</span><span style="color: rgb(0, 68, 136);">:</span><br>                    tx <span style="color: rgb(0, 68, 136);">=</span> tx<span style="color: rgb(0, 68, 136);">[</span><span style="color: rgb(0, 68, 136);">:</span><span style="color: rgb(0, 68, 136);">-</span>1<span style="color: rgb(0, 68, 136);">]</span> <span style="color: rgb(0, 68, 136);">+</span> <span style="color: green; font-style: italic;">'\xa0'</span><br>                _react <span style="color: rgb(0, 68, 136);">+=</span> tx<span style="color: rgb(0, 68, 136);">.</span>replace<span style="color: rgb(0, 68, 136);">(</span><span style="color: green; font-style: italic;">'\n'</span><span style="color: rgb(0, 68, 136);">,</span> <span style="color: green; font-style: italic;">'&lt;br/&gt;'</span><span style="color: rgb(0, 68, 136);">)</span><br>            <span style="color: blue;">else</span><span style="color: rgb(0, 68, 136);">:</span><br>                xHtmlToReact<span style="color: rgb(0, 68, 136);">(</span>child<span style="color: rgb(0, 68, 136);">)</span><br>                <br>    _react <span style="color: rgb(0, 68, 136);">+=</span> <span style="color: green; font-style: italic;">f'<span style="color: rgb(136, 68, 0);">{shift}</span>&lt;/<span style="color: rgb(136, 68, 0);">{n.nodeName.lower()}</span>&gt;'</span><br><br><span style="color: red;"># *** *** ***<br></span><br></div><br></details><br>Примеры и исходные тексты <a href="http://react-py.ru/newdoc?M&amp;js_to_react">здесь.</a><br><br>P.S. На сайтах раскраска питоновского кода (а может и других) не идеальна.<br>Если в питоновской строке есть буквосочетание<b> &amp;amp;</b>, оно отображается как <b>&amp;</b>.<br><br></div></div></div></div></div></div></div>
</body></html>